# Rust è¯­è¨€å­¦ä¹  ï¼ˆä¸€ï¼‰

å­¦ä¹ çš„èµ„æ–™ï¼šhttps://kaisery.github.io/trpl-zh-cn/

https://rustwiki.org/zh-CN/rust-by-example/



## åŸºç¡€çš„ç±»å‹

### åŸºç¡€ç±»å‹

**æ•´å‹**

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

`isize` å’Œ `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„.  æ•°å­—ç±»å‹é»˜è®¤æ˜¯`i32`çš„ã€‚

**æµ®ç‚¹å‹**

æµ®ç‚¹å‹åˆ†åˆ«ä¸º`f32`åˆ`f64`ï¼Œåˆ†åˆ«å 32ä½åˆ64ä½ï¼Œé»˜è®¤ç±»å‹æ˜¯`f64`ã€‚

```rust
let x = 2.0; // f64
let y: f32 = 3.0; // f32
```

**å¸ƒå°”å‹**

Rust ä¸­çš„å¸ƒå°”ç±»å‹ä½¿ç”¨ `bool` è¡¨ç¤º,æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ã€‚

**å­—ç¬¦ç±»å‹**

Rust çš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ï¼Œ`char` ç”±å•å¼•å·æŒ‡å®šã€‚Rust çš„ `char` ç±»å‹çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚(four bytes)ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼ˆUnicode Scalar Valueï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯” ASCII è¡¨ç¤ºæ›´å¤šå†…å®¹ã€‚åœ¨ Rust ä¸­ï¼Œæ‹¼éŸ³å­—æ¯ï¼ˆAccented lettersï¼‰ï¼Œä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å­—ç¬¦ï¼Œemojiï¼ˆç»˜æ–‡å­—ï¼‰ä»¥åŠé›¶é•¿åº¦çš„ç©ºç™½å­—ç¬¦éƒ½æ˜¯æœ‰æ•ˆçš„ `char` å€¼ã€‚Unicode æ ‡é‡å€¼åŒ…å«ä» `U+0000` åˆ° `U+D7FF` å’Œ `U+E000` åˆ° `U+10FFFF` åœ¨å†…çš„å€¼

```rust
let c = 'z';
let z = 'â„¤';
let heart_eyed_cat = 'ğŸ˜»';
```



### å¤åˆç±»å‹

**å…ƒç»„ç±»å‹**

å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°ã€‚

å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œè€Œä¸”è¿™äº›ä¸åŒå€¼çš„ç±»å‹ä¹Ÿä¸å¿…æ˜¯ç›¸åŒçš„ã€‚

æ²¡æœ‰ä»»ä½•å€¼çš„å…ƒç»„ `()` æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œåªæœ‰ä¸€ä¸ªå€¼ï¼Œä¹Ÿå†™æˆ `()` ã€‚è¯¥ç±»å‹è¢«ç§°ä¸º **å•å…ƒç±»å‹**ï¼ˆ*unit type*ï¼‰ï¼Œè€Œè¯¥å€¼è¢«ç§°ä¸º **å•å…ƒå€¼**ï¼ˆ*unit value*ï¼‰ã€‚å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼ï¼Œåˆ™ä¼šéšå¼è¿”å›å•å…ƒå€¼ã€‚

```rust
 let tup: (i32, f64, u8) = (500, 6.4, 1); 
 println!("tup_data 0 {}", tup.0);   // 500
 // 1. tup çš„è·å–æ–¹å¼å’Œpython ä¸åŒï¼Œ python-> tup[0]  rust tup.0
 // 2. tup çš„æ˜¯å¦å¯ä»¥ä¿®æ”¹ï¼Œæ˜¯ mut å»åˆ¤å®šçš„ã€‚å’Œpythonä¸åŒï¼Œä¸æ˜¯ç±»å‹çš„ç‰¹ç‚¹ã€‚
 let (x, y, z) = tup;  //  è§£æ„
 println!("tup_data 0 {}", x);  // 500

 let mut tup_mut = (500, 6.4, 1);
 tup_mut.0 = 300;
 println!("tup_data 0 {}", tup_mut.0);  // 300
// å…ƒç»„æ˜¯é•¿åº¦ä¸å¯å˜ï¼Œ æ•°æ®å¯ä¸å¯å˜æ˜¯ç”±mutå»æŒ‡å®šçš„ã€‚
```

**æ•°ç»„ç±»å‹**

å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„**ç±»å‹å¿…é¡»ç›¸åŒ**, æ•°ç»„æ˜¯**å›ºå®šé•¿åº¦**çš„, ä¸€æ—¦å£°æ˜ï¼Œå®ƒä»¬çš„é•¿åº¦ä¸èƒ½å¢é•¿æˆ–ç¼©å°ã€‚

```rust
let a = [1, 2, 3, 4, 5];
let a: [i32; 5] = [1, 2, 3, 4, 5]; // [å…ƒç´ ç±»å‹;å›ºå®šé•¿åº¦] çš„å£°æ˜ã€‚
let a = [3;5]; // [åˆå§‹å€¼;å›ºå®šé•¿åº¦] =ã€‹ let a = [3, 3, 3, 3, 3];  æ•ˆæœç›¸åŒ
// è®¿é—®æ•°ç»„å…ƒç´ 
println!("a 0=> {}", a[0]);

```

## å‡½æ•°çš„å®šä¹‰å’Œè¿”å›å€¼

### å‡½æ•°

å‡½æ•°ä½¿ç”¨`fn` å…³é”®å­—æ¥å£°æ˜æ–°å‡½æ•°ã€‚

```rust
fn main(){
   y = add(2,3)
}
fn add(x:i32, y:i32) -> i32 {  // ä½¿ç”¨ å˜é‡åç§°:ç±»å‹ çš„æ–¹å¼ å¿…éœ€å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹
    return x+y;
}
```

**å‡½æ•°ä½“**

å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—çš„è¯­å¥å’Œä¸€ä¸ªå¯é€‰çš„ç»“å°¾è¡¨è¾¾å¼æ„æˆã€‚

```rust
fn main() {
    let x = 5;
    let y = {
        let x = 3;
        x + 1
    };  // è¡¨è¾¾å¼ï¼Œ æœ‰è¿”å›å€¼çš„å¯ä»¥è¿™æ ·å†™
    println!("The value of y is: {}", y);   
}  // y = 4
```

## æ§åˆ¶æµè¯­å¥

```rust
// if
let number = 3;
if number < 5 {  // if å¿…é¡»æ˜¯bool  ä¸èƒ½åƒpython if number
     println!("small 5");
} else if number > 5 {
     println!("biger 5");
} else {
    println!("eq 5");
}
//  å¾ªç¯  æ— é™å¾ªç¯
loop {
    dothing();  
}
// å¤šå±‚loop åµŒå¥—
// å¾ªç¯æ ‡ç­¾ counting_up
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {}", count);
        let mut remaining = 10;

        loop {
            println!("remaining = {}", remaining);
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {}", count);
}
// while å¾ªç¯
fn main() {
    let mut number = 3;
    while number != 0 {
        println!("{}!", number);
        number = number - 1;
    }
    println!("LIFTOFF!!!");
}
// for å¾ªç¯
fn main() {
    let a = [10, 20, 30, 40, 50];
    for element in a.iter() { // è¿™æ˜¯ for å¾ªç¯ä¸€ä¸ªè¿­ä»£å™¨
        println!("the value is: {}", element);
    }
    for number in (1..4).rev() {  // rev æ˜¯åè½¬
        println!("{}!", number);
    }
    println!("LIFTOFF!!!");
    
}
```







### å…¶ä»–çš„é›†åˆ

**vector** 

ç±»å‹æ˜¯ `Vec<T>`ï¼Œä¹Ÿè¢«ç§°ä¸º *vector*ã€‚vector å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªå•ç‹¬çš„æ•°æ®ç»“æ„ä¸­å‚¨å­˜å¤šäºä¸€ä¸ªçš„å€¼ï¼Œå®ƒåœ¨å†…å­˜ä¸­å½¼æ­¤ç›¸é‚»åœ°æ’åˆ—æ‰€æœ‰çš„å€¼ã€‚vector åªèƒ½å‚¨å­˜**ç›¸åŒç±»å‹**çš„å€¼ã€‚

```rust
// æ–°å»ºvector
let v: Vec<i32> = Vec::new();  // æ–°å»ºä¸€ä¸ªç©ºçš„ vectoræ¥å‚¨å­˜ i32 ç±»å‹çš„å€¼
// ä¹Ÿæä¾› vec!å®å»åˆ›å»º vec
let v = vec![1, 2, 3];
// å…ƒç´ æ·»åŠ 
let mut v = Vec::new(); // å¯å˜ä¸å¯å˜ æ˜¯mut å…³é”®å­—ç®¡ç†çš„ã€‚
// å¦‚æœæƒ³è¦èƒ½å¤Ÿæ”¹å˜å®ƒçš„å€¼ï¼Œå¿…é¡»ä½¿ç”¨ mut å…³é”®å­—ä½¿å…¶å¯å˜ã€‚
v.push(5); 
v.push(6);  // push å¢åŠ å€¼

// é”€æ¯ï¼Œ æ·»åŠ ä½œç”¨åŸŸ
{
    let v = vec![1, 2, 3, 4];
    // å¤„ç†å˜é‡ v
} // <- è¿™é‡Œ v ç¦»å¼€ä½œç”¨åŸŸå¹¶è¢«ä¸¢å¼ƒ

// è·å– æ˜¯ v[index] æˆ–è€… v.get(index) æ–¹å¼è·å–
let v = vec![1, 2, 3, 4, 5];
let does_not_exist = &v[100];  // panic   
let does_not_exist = v.get(100);  // return  None
```



